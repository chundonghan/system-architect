## 第3章 数据库系统
### 3.1 数据库管理系统的类型
DBMS按数据模型划分：  
- 关系型DBMS  
- 文档型DBMS  
- 键值型DBMS  
- 对象型DBMS  

### 3.2 数据库模式与范式
#### 3.2.1 数据库的结构与模式
图3-1 数据库系统机构层次  
![数据库系统机构层次](https://raw.githubusercontent.com/chundonghan/system-architect/master/img/ch3_1.png)  

1. 三级抽象  
    1. 用户级数据库 （用户视图）  
        对应于外模式  
    2. 概念级数据库 （DBA视图）  
        对应于概念模式  
    3. 物理级数据库 （内部视图）  
        对应于内模式  
2. 三级模式  
    1. 概念模式  
    2. 外模式  
    3. 内模式  
    三者之间的关系：  
        1. 模式是数据库的中心和关键  
        2. 内模式依赖于模式，独立于外模式和存储设备  
        3. 外模式面向具体的应用，独立于内模式和存储设备  
        4. 应用程序依赖于外模式，独立于模式和内模式  
3. 两级独立性  
    - 物理独立性  
        物理独立性是指用户的应用程序与存储在磁盘上的数据库中的数据是相互独立的。  
    - 逻辑独立性  
        逻辑独立性是指用户的应用程序与数据库中的逻辑结构是相互独立的。  
逻辑独立性比物理独立性更难实现。  

#### 3.2.2 数据模型
数据模型主要有两大类 `概念数据模型（实体-联系模型，E-R）`，`基本数据模型（结构数据模型）`。  
概念数据模型是按照用户的观点来对数据和信息建模，主要用于数据库设计。  
基本数据模型是按照计算机系统的观点对数据和信息建模，主要用于DBMS的实现。  
基本数据模型是数据库系统的核心和基础。由`数据结构`、`数据操作`、`完整性约束`组成。  
常用的基本数据模型有`层次模型`、`网状模型`、`关系模型`、`面向对象模型`。  
#### 3.2.3 关系代数
1. 并  
2. 差  
3. 交  
4. 笛卡尔积  
    列相加 行相乘  
5. 选择  
    where？  
6. 投影  
    group by？  
7. 连接  
    join  
8. 除法  
    象集  

#### 3.2.4 数据的规范化
关系模型满足的`确定约束条件`称为`范式`。范式级别低到高：1NF、2NF、3NF、BCNF、4NF。  
把一个`低一级`的关系模型`分解`为`高一级`关系模型的过程，称为`关系模型的规范化`。  
关系模型分解准则：  
1. 无损连接性： 信息不失真  
2. 函数依赖保持性： 不破坏属性间存在的依赖关系  

规范化的基本思想是逐步`消除不合适的函数依赖`，使数据库中的各种关系模型`达到某种程度的分离`。规范化解决的主要是单个实体的是`质量问题`，是对问题域中原始数据的`正规化处理`。  
规范化理论给出了判断关系模型优劣的理论标准，帮助预测模式可能出现的问题，是数据库逻辑设计的指南和工具：  
1. 用数据依赖的概念分析和表示各数据项之间的关系  
2. 消除E-R图中的冗余关系  
- 主码  
    - 主属性  
    - 非主属性  
- 外码  

1. 第一范式(确保每列保持原子性)  
    关系R中所有属性的值域都是简单域，属性不可再分，那么关系模型R是第一范式。  
    第一范式是在实际数据库设计中必须先达到的，通常称为数据元素的结构化。  
2. 第二范式(确保表中的每列都和主键相关)  
    关系R属于1NF，且所有的非主属性都完全依赖于主属性，称之为第二范式。  
    用分解的方法消除部分依赖，使得关系达到2NF的标准。  
3. 第三范式(确保每列都和主键列直接相关,而不是间接相关)  
    关系R属于2NF，且每个非主属性不传递依赖于主属性。  
    从2NF中消除传递依赖，就是3NF。  
4. BC范式  
    排除任何属性对候选键的传递依赖与部分依赖。  
    一个满足BCNF的关系模式的条件:  
　　    1. 所有非主属性对每一个码都是完全函数依赖。  
　　    2. 所有的主属性对每一个不包含它的码,也是完全函数依赖。  
　　    3. 没有任何属性完全函数依赖于非码的任何一组属性。  

### 3.3 数据库设计  
    数据库设计的过程是将数据库系统与现实世界密切地、有机地、协调一致地结合起来的过程。  

#### 3.3.1 数据库设计的方法  
    直观设计法、规范设计法、计算机辅助设计法、自动化设计法。

#### 3.3.2 数据库设计的基本步骤  
    需求分析、概念结构设计、逻辑结构设计、物理设计。  

#### 3.3.3 需求分析  
需求说明书
1. 确认需求、确定设计目标  
2. 分析和收集数据  
3. 整理文档  


#### 3.3.4 概念结构设计  
数据模型  E-R模型


#### 3.3.5 逻辑结构设计  


#### 3.3.6 数据库物理设计  

### 3.4 事务管理  
    ACID：原子性、一致性、隔离性、持久性  
#### 3.4.1 并发控制  
1. 排他型封锁  
2. 共享型封锁  




